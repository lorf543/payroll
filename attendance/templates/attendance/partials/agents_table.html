{% for agent in team_members %}
    <tr>
        <td>
            <div class="d-flex align-items-center">
                <div class="agent-avatar me-3">
                    <span class="initials">
                        {{ agent.user.first_name.0 }}{{ agent.user.last_name.0 }}
                    </span>
                </div>
                <div>
                    <strong>{{ agent.full_name }}</strong><br>
                    <small class="text-muted">{{ agent.employee_code }}</small>
                </div>
            </div>
        </td>

        <td>{{ agent.position.name|default:"-" }}</td>

        {% if agent.current_status %}
            <td>
                <span class="badge status-{{ agent.current_status.status }}">
                    {{ agent.current_status.status }}
                </span>
            </td>
            <td>
                {{ agent.current_status.start_time|timesince:current_time }}
            </td>
            <td>
                {{ agent.current_status.start_time|date:"M j, g:i A" }}
            </td>
        {% else %}
            <td><span class="badge status-offline">Offline</span></td>
            <td>-</td>
            <td>-</td>
        {% endif %}

        <td>
            <div class="btn-group btn-group-sm">
                <a href="{% url 'employee_status_list' agent.id %}" 
                class="btn btn-outline-primary" 
                title="View Profile">
                    <i class="bi bi-person"></i>
                </a>
            </div>
        </td>
    </tr>

{% empty %}
<tr>
    <td colspan="6" class="text-center text-muted py-4">
        <i class="bi bi-people display-4 d-block mb-2"></i>
        No team members assigned
    </td>
</tr>
{% endfor %}
