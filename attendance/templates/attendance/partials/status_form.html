{% load humanize %}  {# AsegÃºrate de cargar humanize #}

<form 
    method="post"
    hx-post="{% url 'change_agent_status' employee.id %}" 
    hx-target="#current-status" 
    hx-swap="outerHTML"
    class="status-form"
>
    {% csrf_token %}
    <div class="mb-3">
        <label for="id_status" class="form-label">Select Status</label>
        {{ form.status }}
    </div>
    <button type="submit" class="btn btn-primary">Update Status</button>
</form>


<!-- Current Status Display -->
<div class="mt-3 p-3 bg-light rounded">
    <div class="d-flex justify-content-between align-items-center">
        <span class="text-muted">Current Status:</span>
        <span id="status-badge-preview"
              class="badge status-{{ current_status.status|default:'offline' }} px-3 py-2">
            {% if current_status %}
                {{ current_status.get_status_display }}
            {% else %}
                Offline
            {% endif %}
        </span>
    </div>
    
    {% if current_status and current_status.start_time %}
    <small class="text-muted d-block mt-1">
        Since: {{ current_status.start_time|naturaltime }}
    </small>
    {% endif %}
</div>

<!-- Optional: Legends -->
<div class="mt-2">
    <small class="text-muted">Status Colors:</small><br>
    <span class="badge status-ready">Ready</span>
    <span class="badge status-break">Break</span>
    <span class="badge status-lunch">Lunch</span>
    <span class="badge status-training">Training</span>
    <span class="badge status-meeting">Meeting</span>
    <span class="badge status-offline">Offline</span>
</div>


